<html>
 <head>
  <title>Test PHP</title>
  <link rel="stylesheet" href="style.css">
 </head>
 <body>

 <div>
    <table>
    <tr style="font-weight : bold">
        <td>Date</td>
        <td>Température CPU</td>
        <td>Utilisation du CPU</td>
        <td>Utilisation de la RAM</td>
    </tr>
    <tr>
        <td id="date">0</td>
        <td id="temp">0</td>
        <td id="cpu">0</td>
        <td id="ram">0</td>
    </tr>
    </table>
    <p id="text" onload="getText()"></p>
 </div>
 <script>
    const socket = new WebSocket("ws://192.168.3.209:5000");

    socket.addEventListener("open", function (event){
        console.log("Connecté WS serveur")
    });

    socket.addEventListener("close", function (event){
        console.log("Déconnecté WS serveur")
    });

    socket.addEventListener("message", function (event){
        console.log("Serveur : Data receive")
        UpdateData(JSON.parse(event.data))
    });

    function UpdateData(CpuJson){
            console.log(CpuJson);
            document.getElementById("date").innerText = CpuJson['CPUdata']['Date'];
            document.getElementById("temp").innerText = CpuJson['CPUdata']['Temperature'] + "°C";
            document.getElementById("cpu").innerText = CpuJson['CPUdata']['CpuUsage'].toFixed(2) + "%";
            document.getElementById("ram").innerText = CpuJson['CPUdata']['RAMUsage'] + "/3.7Go"
            document.getElementById("text").innerText = CpuJson['CPUdata']['Text']
            this.getText()
        }   

    const sendMsg = () =>{
        console.log("Client : Ping")
        socket.send("Ping")
    }
 </script>

 <script src="script.js"></script>

 <div class="container">
    <div class="cookiesContent" id="cookiesPopup" style="display:none;">
      <button class="close">?</button>
      <img src="https://cdn-icons.flaticon.com/png/512/3200/premium/3200506.png?token=exp=1634984321~hmac=ba9aa75696b0b62de7e42e5f38a970c7" alt="cookies-img" />
      <p>We use cookies for improving user experience, analytics and marketing.</p>
      <button class="accept">That's fine!</button>
    </div>
  </div>

 </body>
</html>